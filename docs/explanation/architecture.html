
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Architecture &#8212; tinyoauth  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Spike aws lambda" href="spike-aws-lambda.html" />
    <link rel="prev" title="Welcome to tinyoauth’s documentation!" href="../index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">tinyoauth  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Explanation:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Architecture
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="spike-aws-lambda.html">
   Spike aws lambda
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="apitest.html">
   Api test
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="infrastructure.html">
   Infrastructure
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  How-to Guides:
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../how-to-guides/development-guide.html">
   Development guide
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference:
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/index.html">
   <span class="xref myst">
    Module Index
   </span>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/api-design.html">
   Api design
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/explanation/architecture.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-style-perspective">
   Architecture style perspective
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-dicisions-perspective">
   Architecture dicisions perspective
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#build">
     1. Build
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#documentation">
     2. Documentation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#api-test">
     3.
     <span class="xref myst">
      Api test
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#spike-aws-lambda">
     4.
     <span class="xref myst">
      Spike aws lambda
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#authentication-trade-off">
     5. Authentication trade-off
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#authorization-oauth2-0">
     6. Authorization: OAuth2.0
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#design-principle-perspective">
   Design principle perspective
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-characteristics-perspective">
   Architecture characteristics perspective
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Architecture</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-style-perspective">
   Architecture style perspective
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-dicisions-perspective">
   Architecture dicisions perspective
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#build">
     1. Build
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#documentation">
     2. Documentation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#api-test">
     3.
     <span class="xref myst">
      Api test
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#spike-aws-lambda">
     4.
     <span class="xref myst">
      Spike aws lambda
     </span>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#authentication-trade-off">
     5. Authentication trade-off
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#authorization-oauth2-0">
     6. Authorization: OAuth2.0
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#design-principle-perspective">
   Design principle perspective
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-characteristics-perspective">
   Architecture characteristics perspective
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="architecture">
<h1>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">#</a></h1>
<section id="architecture-style-perspective">
<h2>Architecture style perspective<a class="headerlink" href="#architecture-style-perspective" title="Permalink to this headline">#</a></h2>
<div class="mermaid">
            flowchart LR
  api[restful api] --&gt; controller --&gt; service --&gt; repository --&gt; db
        </div></section>
<section id="architecture-dicisions-perspective">
<h2>Architecture dicisions perspective<a class="headerlink" href="#architecture-dicisions-perspective" title="Permalink to this headline">#</a></h2>
<section id="build">
<h3>1. Build<a class="headerlink" href="#build" title="Permalink to this headline">#</a></h3>
<p>We have to build artifacts for FaaS and BaaS since current project contains too many <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code> and redundancy modules.
<a class="reference external" href="https://esbuild.github.io/">esbuild</a> is an extremely fast JavaScript bundler that can do what we desire:</p>
<ul class="simple">
<li><p>simple to use: <code class="docutils literal notranslate"><span class="pre">npx</span> <span class="pre">esbuild</span> <span class="pre">server/index.js</span> <span class="pre">--bundle</span> <span class="pre">--platform=node</span> <span class="pre">--target=node14.19.2</span> <span class="pre">--outfile=build/server/index.js</span></code></p></li>
<li><p>build a standalone artifact: a huuuuge <code class="docutils literal notranslate"><span class="pre">index.js</span></code></p></li>
</ul>
</section>
<section id="documentation">
<h3>2. Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><p>It doesn’t matter how good your product is, because if its documentation is not good enough, people will not use it. Even if they have to use it because they have no choice, without good documentation, they won’t use it effectively or the way you’d like them to.</p>
</div></blockquote>
<p>That’s the reason why we need an awesome document tool and follow document quadrants pattern.</p>
<p><a class="reference external" href="https://www.sphinx-doc.org/en/master/">sphinx</a> is the best document tool as far as I know. It was originally created for the Python documentation, and it has excellent facilities for the documentation of software projects in a range of languages.</p>
</section>
<section id="api-test">
<h3>3. <a class="reference internal" href="apitest.html"><span class="doc std std-doc">Api test</span></a><a class="headerlink" href="#api-test" title="Permalink to this headline">#</a></h3>
</section>
<section id="spike-aws-lambda">
<h3>4. <a class="reference internal" href="spike-aws-lambda.html"><span class="doc std std-doc">Spike aws lambda</span></a><a class="headerlink" href="#spike-aws-lambda" title="Permalink to this headline">#</a></h3>
</section>
<section id="authentication-trade-off">
<h3>5. Authentication trade-off<a class="headerlink" href="#authentication-trade-off" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>stateless</p></li>
<li><p>CAP</p></li>
<li><p>CORS</p></li>
<li><p>security</p></li>
</ul>
</section>
<section id="authorization-oauth2-0">
<h3>6. Authorization: OAuth2.0<a class="headerlink" href="#authorization-oauth2-0" title="Permalink to this headline">#</a></h3>
</section>
</section>
<section id="design-principle-perspective">
<h2>Design principle perspective<a class="headerlink" href="#design-principle-perspective" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>SOLID</p></li>
</ul>
</section>
<section id="architecture-characteristics-perspective">
<h2>Architecture characteristics perspective<a class="headerlink" href="#architecture-characteristics-perspective" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>testability: easy to test</p></li>
<li><p>installability: it can be deployed in server/serverless way</p></li>
<li><p>flexibility:</p>
<ul>
<li><p>can be intergrated as a component</p></li>
<li><p>can be a pod in kubenetes cluster</p></li>
<li><p>can be deployed as a standalne service</p></li>
<li><p>can be a component of micro service system</p></li>
</ul>
</li>
<li><p>configurability</p></li>
</ul>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Welcome to tinyoauth’s documentation!</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="spike-aws-lambda.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Spike aws lambda</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By devecorsoft<br/>
  
      &copy; Copyright 2022, devecorsoft.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>